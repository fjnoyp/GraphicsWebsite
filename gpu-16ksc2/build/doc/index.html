<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>GPUProgramming: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">GPUProgramming
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">GPUProgramming Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Please note that compiling the shader takes several minutes!!! If the screen is black it is not broken - it's just taking a long time to load.</p>
<h1><a class="anchor" id="screenshots"></a>
ShaderToy Screenshots</h1>
<p>Reinder Nijhoff | I just had absolutely no idea how they did this. Did they relate the pixel position to the transformation of the image to get the cut effect that they showed? But then how did they change their distance function to warp and twist and cut and zoom into itself like they did?? Looking at it again after getting my hands dirty with GLSL makes me even more confused about how they could have possibly pulled off what they did.  <table style='display:inline-table;' cellspacing='2' cellpadding='0' border='0'><tr><td align='center'><a href='Escher.jpg'><img src='Escher.jpg' border='1' height='120'></img></a></td></tr><tr><td align='center'><b> Escher</b></td></table> <script>document.write('<div style=\'display: none; visibility: hidden;\'>');</script>  </p><div class="image">
<img src="Escher.jpg" alt="Escher.jpg"/>
</div>
<p>  <script>document.write('</div>');</script> </p>
<p>Dave Hoskins | Again, little intuition about how stars was created. For example, how does a math function have translucency features like in the movie?  <table style='display:inline-table;' cellspacing='2' cellpadding='0' border='0'><tr><td align='center'><a href='Stars.jpg'><img src='Stars.jpg' border='1' height='120'></img></a></td></tr><tr><td align='center'><b> Stars</b></td></table> <script>document.write('<div style=\'display: none; visibility: hidden;\'>');</script>  </p><div class="image">
<img src="Stars.jpg" alt="Stars.jpg"/>
</div>
<p>  <script>document.write('</div>');</script> </p>
<p>Morgan McGuire | Little intution about this as well. Especially how the infinite depth was represented.  <table style='display:inline-table;' cellspacing='2' cellpadding='0' border='0'><tr><td align='center'><a href='Mandelbulb.jpg'><img src='Mandelbulb.jpg' border='1' height='120'></img></a></td></tr><tr><td align='center'><b> Mandelbulb</b></td></table> <script>document.write('<div style=\'display: none; visibility: hidden;\'>');</script>  </p><div class="image">
<img src="Mandelbulb.jpg" alt="Mandelbulb.jpg"/>
</div>
<p>  <script>document.write('</div>');</script> </p>
<h1><a class="anchor" id="theRenderer"></a>
Rough overview of Shader</h1>
<p>The code for the shader was given to us in the trace-analystic.pix file. The L_i method is called and returns the pixel color we display on the screen. The L_i method uses L_o for shading. However, it uses the intersectScene method to figure out what the distance and surfel should be from the intersection, those values are retrieved from my Scene.glsl's intersect method, and by extension the massive scene intersection method. L_o calculates environment lighting, mirror reflections, and glossy environment reflection. It also goes through the lights in the scene and calculates a given light's effect on the surfel in question.</p>
<h1><a class="anchor" id="theObject"></a>
ImageConstruction</h1>
<p>I wanted to use the mod operator to make a repeating city. The basic idea is that I transform the input point (the current ray point P) by several mod operations over different steps. Therefore, a point P would be transformed by mod A and mod B, and then when I have two different distance functions ObjA and ObjB, then evaluating a unionOperation( ObjA(A), Obj(B) ) would result in object A occurring every AxA (in world space) and object B occurring every BxB. More detail on city creation code in modeling process section. I created my image by progressively adding more and more objects that would be created every N steps in world space. Images below:</p>
<p> <table style='display:inline-table;' cellspacing='2' cellpadding='0' border='0'><tr><td align='center'><a href=' Process1.jpg'><img src=' Process1.jpg' border='1' height='120'></img></a></td></tr><tr><td align='center'><b> "some repeating objects"</b></td></table> <script>document.write('<div style=\'display: none; visibility: hidden;\'>');</script>  </p><div class="image">
<img src="Process1.jpg" alt="Process1.jpg"/>
</div>
<p>  <script>document.write('</div>');</script>   <table style='display:inline-table;' cellspacing='2' cellpadding='0' border='0'><tr><td align='center'><a href=' Process2.jpg'><img src=' Process2.jpg' border='1' height='120'></img></a></td></tr><tr><td align='center'><b> "more repeating objects"</b></td></table> <script>document.write('<div style=\'display: none; visibility: hidden;\'>');</script>  </p><div class="image">
<img src="Process2.jpg" alt="Process2.jpg"/>
</div>
<p>  <script>document.write('</div>');</script>   <table style='display:inline-table;' cellspacing='2' cellpadding='0' border='0'><tr><td align='center'><a href=' Process3.jpg'><img src=' Process3.jpg' border='1' height='120'></img></a></td></tr><tr><td align='center'><b> "even more repeating objects"</b></td></table> <script>document.write('<div style=\'display: none; visibility: hidden;\'>');</script>  </p><div class="image">
<img src="Process3.jpg" alt="Process3.jpg"/>
</div>
<p>  <script>document.write('</div>');</script> </p>
<p>The normals weren't working...</p>
<p> <table style='display:inline-table;' cellspacing='2' cellpadding='0' border='0'><tr><td align='center'><a href=' WrongNormals.jpg'><img src=' WrongNormals.jpg' border='1' height='120'></img></a></td></tr><tr><td align='center'><b> "wrong normals"</b></td></table> <script>document.write('<div style=\'display: none; visibility: hidden;\'>');</script>  </p><div class="image">
<img src="WrongNormals.jpg" alt="WrongNormals.jpg"/>
</div>
<p>  <script>document.write('</div>');</script> </p>
<p>The normals returned were "fake", when you return the real normal you get cool city effects.</p>
<p> <table style='display:inline-table;' cellspacing='2' cellpadding='0' border='0'><tr><td align='center'><a href=' GreenCity.jpg'><img src=' GreenCity.jpg' border='1' height='120'></img></a></td></tr><tr><td align='center'><b> "normals working" </b></td></table> <script>document.write('<div style=\'display: none; visibility: hidden;\'>');</script>  </p><div class="image">
<img src="GreenCity.jpg" alt="GreenCity.jpg"/>
</div>
<p>  <script>document.write('</div>');</script>   <table style='display:inline-table;' cellspacing='2' cellpadding='0' border='0'><tr><td align='center'><a href=' GreenCityMovie.mp4'><div style='border: 1px solid #00F; width: 180px; height: 120px; background: #222; color: #AAA; text-align: center;'><span style='position: relative; top: 40px; font-size: 100px; '>&#9654;</span><br></br><span style='position: relative; top: 30px;'>Play Video</span></div></a></td></tr><tr><td align='center'><b> "movie of result"</b></td></table> </p><div style="display: none; visibility:hidden"> <div class="image">
<img src="GreenCityMovie.mp4" alt="GreenCityMovie.mp4"/>
</div>
 </div><p>Some closeups on the buildings that are created. Note the subtle incorporation of four different geometric primitives.  <table style='display:inline-table;' cellspacing='2' cellpadding='0' border='0'><tr><td align='center'><a href=' SpecCylinder.jpg'><img src=' SpecCylinder.jpg' border='1' height='120'></img></a></td></tr><tr><td align='center'><b> "cylinder the smokestack building" </b></td></table> <script>document.write('<div style=\'display: none; visibility: hidden;\'>');</script>  </p><div class="image">
<img src="SpecCylinder.jpg" alt="SpecCylinder.jpg"/>
</div>
<p>  <script>document.write('</div>');</script>   <table style='display:inline-table;' cellspacing='2' cellpadding='0' border='0'><tr><td align='center'><a href=' SpecSphere.jpg'><img src=' SpecSphere.jpg' border='1' height='120'></img></a></td></tr><tr><td align='center'><b> "the dome building" </b></td></table> <script>document.write('<div style=\'display: none; visibility: hidden;\'>');</script>  </p><div class="image">
<img src="SpecSphere.jpg" alt="SpecSphere.jpg"/>
</div>
<p>  <script>document.write('</div>');</script>   <table style='display:inline-table;' cellspacing='2' cellpadding='0' border='0'><tr><td align='center'><a href=' SpecTorus.jpg'><img src=' SpecTorus.jpg' border='1' height='120'></img></a></td></tr><tr><td align='center'><b> "the office building?" </b></td></table> <script>document.write('<div style=\'display: none; visibility: hidden;\'>');</script>  </p><div class="image">
<img src="SpecTorus.jpg" alt="SpecTorus.jpg"/>
</div>
<p>  <script>document.write('</div>');</script> </p>
<p>The nuclear bomb effect was achieved by using sMin. The value is set to be extremly high.  <table style='display:inline-table;' cellspacing='2' cellpadding='0' border='0'><tr><td align='center'><a href=' SMIN.jpg'><img src=' SMIN.jpg' border='1' height='120'></img></a></td></tr><tr><td align='center'><b> "nuclear bomb through smin effect"</b></td></table> <script>document.write('<div style=\'display: none; visibility: hidden;\'>');</script>  </p><div class="image">
<img src="SMIN.jpg" alt="SMIN.jpg"/>
</div>
<p>  <script>document.write('</div>');</script> </p>
<h1><a class="anchor" id="resources"></a>
Resources Used to Learn GLSL</h1>
<ul>
<li>Graphic Codex's function documentation</li>
<li>Google (which always linked to StackOverflow) on some quick/small questions I had with syntax.</li>
</ul>
<h1><a class="anchor" id="differences"></a>
Semantic and Syntactic differences between C++ and GLSL</h1>
<p>-You cannot use for loops in GLSL! You have to use some special #if which expands out your code. I really wanted to have a for loop increment by 2 each time as well, but it appears that the i value in the for cannot even be modified at all.</p>
<p>-No pointers, instead use in for readonly (pass by value), out for write only, and in out for read/write behavior. I had some problems with this when I did not specify in out and did not modify the object I had passed in.</p>
<p>-No header file declaration, only the glsl file or the pix file.</p>
<p>-No recursion... I had a passing encounter with this restriction when I was experimenting with the pseudo if statement tree expansion approach for the buildings. I was planning on passing in smaller and smaller d values (the values that control the buildings size) and was curious about what would happen if a expansion from the original box expansion called that box expansion again (it had different d values).</p>
<p>-You can still use if statements, but its heavy performance cost in this context forced me to change the structure of my code / the behavior I was hoping to achieve with random buildings.</p>
<h1><a class="anchor" id="construction"></a>
Film Making Process</h1>
<p>The basic premise I wanted to have was to begin with city shots to show off the mod city and to then cut to shots with the "nuclear bomb" going off in its center. Therefore the music I wanted needed to start slow but have a sort of climax at the 15 - 20 second mark.</p>
<p>In the beginning I actually wanted to have a lyrics song that would match with my movie, but I wasn't able to find any. In the end I tried searching for electronic music but most of the songs I found were all monotone and I wanted me movie to have a climax. Devon was incredibly helpful, he knows a friend who makes some excellent music who was kind enough to give me explicit permission to use his song. The beats worked perfectly, it started slow with drums, and then had this nice rattle like effect which synchs well with the bomb going off.</p>
<p>I started by taking shots of the city from various angles. At this point I began imagining having a slow rising shot from ground level to the top of one of the dome towers and then having the nuclear bomb slowly go off as the camera panned to the top. After I had enough shots of the city, I switched to camera angles of the nuclear bomb. My general idea here was to have far away shots of the nuclear bomb mixed with close ups so that I could have some progression of the explosion in my movie.</p>
<p>Modeling will be described in the modeling process section.</p>
<p>To be honest, when I began editing I did not have a clear idea of what I wanted beside having some city shots and then shots of the nuclear bomb going off. For this section I let the process of editing guide the creation of my movie. I would play the music clip over and over again while watching different clips I had, and then pick the one that I felt would be most appropriate. In a meta sense, as I was making the movie I had the end goal in mind of having the city -&gt; bomb progression.</p>
<h1><a class="anchor" id="modeling"></a>
Modeling Process</h1>
<p>Please note the files of interest are data-files/trace-me.pix and data-files/Scene.glsl.</p>
<p>trace-me.pix handles the rendering scene.glsl is where all of the modeling takes place</p>
<p>As mentioned above, the input point is transformed on several different modulo steps. The transformed points are then used to have different objects appear at different x,y repetitions to reduce the uniformity of the city. These points are then used to create different objects. </p><div class="fragment"><div class="line">p1 = transformPoint(p,modValue1); </div>
<div class="line">p2 = transformPoint(p,modValue2); </div>
<div class="line">p3 = transformPoint(p,modValue3); </div>
<div class="line">...</div>
<div class="line">pN = transformPoint(p,modValue); </div>
</div><!-- fragment --><p>I have a set of generic methods which create specific objects that I might want to repeat in different forms. These generic methods take in a point, a local point, and a size specifier. They are then called by a set of other specific "builder" methods that specify those parameters.</p>
<p>These builder methods are then evaluted in the single distance function. The nuclear explosion effect was achieved by having a sphere increase in radius over time. The entire float result of the entire city is sminned with the distance function result of the exploding sphere. I use a value calculated in smin as a "blending" variable between the fiery orange color of the nuclear fireball and the regular grayish color of the cityscape:</p>
<p>note: a and b are distances returned by two distance estimators, k is blending factor </p><div class="fragment"><div class="line"><span class="keywordtype">float</span> h = clamp( 0.5+0.5*(b-a)/k, 0.0, 1.0 );</div>
<div class="line"></div>
<div class="line">Color3 color1 = Color3(1, 1, 1); </div>
<div class="line">Color3 color2 = Color3(1, 1, 0); </div>
<div class="line">color1 = color1 - (h-1)*Color3(7,2,0); </div>
<div class="line">ourMat = Material( color1, 1,1,2000);</div>
</div><!-- fragment --><p>I would like to thank Devon a lot for helping me. He found the music I used and took such a huge stake in my project that when he didn't like the credits sequence, he changed the frame and text so that it would look better.</p>
<h1><a class="anchor" id="movie"></a>
Final Movie</h1>
<p> <table style='display:inline-table;' cellspacing='2' cellpadding='0' border='0'><tr><td align='center'><a href='16ksc2-film.mp4'><div style='border: 1px solid #00F; width: 180px; height: 120px; background: #222; color: #AAA; text-align: center;'><span style='position: relative; top: 40px; font-size: 100px; '>&#9654;</span><br></br><span style='position: relative; top: 30px;'>Play Video</span></div></a></td></tr><tr><td align='center'><b> "final movie"</b></td></table> </p><div style="display: none; visibility:hidden"> <div class="image">
<img src="16ksc2-film.mp4" alt="16ksc2-film.mp4"/>
</div>
 </div><h1><a class="anchor" id="time"></a>
Time for Required: ~6 hours</h1>
<h1><a class="anchor" id="timeMore"></a>
Time for Optional: ~15 hours</h1>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 10 2014 18:12:47 for GPUProgramming by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
